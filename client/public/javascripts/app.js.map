{"version":3,"file":"public/javascripts/app.js","sources":["app/collections/bookmark_collection.coffee","app/initialize.coffee","app/lib/app_helpers.coffee","app/lib/view.coffee","app/lib/view_collection.coffee","app/models/bookmark.coffee","app/routers/app_router.coffee","app/views/app_view.coffee","app/views/bookmark_view.coffee","app/views/bookmarks_view.coffee","app/views/templates/bookmark.jade","app/views/templates/home.jade"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/BA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhDA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3IA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9MA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3DA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A","sourcesContent":["var Bookmark, BookmarkCollection,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBookmark = require('../models/bookmark');\n\nmodule.exports = BookmarkCollection = (function(_super) {\n\n  __extends(BookmarkCollection, _super);\n\n  BookmarkCollection.prototype.model = Bookmark;\n\n  BookmarkCollection.prototype.url = 'bookmarks';\n\n  function BookmarkCollection(view) {\n    this.view = view;\n    BookmarkCollection.__super__.constructor.call(this);\n    this.bind(\"add\", this.view.renderOne);\n    this.bind(\"reset\", this.view.renderAll);\n  }\n\n  return BookmarkCollection;\n\n})(Backbone.Collection);\n","var _ref, _ref1, _ref2, _ref3, _ref4;\n\nif ((_ref = this.CozyApp) == null) {\n  this.CozyApp = {};\n}\n\nif ((_ref1 = CozyApp.Routers) == null) {\n  CozyApp.Routers = {};\n}\n\nif ((_ref2 = CozyApp.Views) == null) {\n  CozyApp.Views = {};\n}\n\nif ((_ref3 = CozyApp.Models) == null) {\n  CozyApp.Models = {};\n}\n\nif ((_ref4 = CozyApp.Collections) == null) {\n  CozyApp.Collections = {};\n}\n\n$(function() {\n  var AppView;\n  require('../lib/app_helpers');\n  CozyApp.Views.appView = new (AppView = require('views/app_view'));\n  CozyApp.Views.appView.render();\n  return Backbone.history.start({\n    pushState: true\n  });\n});\n","\n(function() {\n  return (function() {\n    var console, dummy, method, methods, _results;\n    console = window.console = window.console || {};\n    method = void 0;\n    dummy = function() {};\n    methods = 'assert,count,debug,dir,dirxml,error,exception,\\\n                   group,groupCollapsed,groupEnd,info,log,markTimeline,\\\n                   profile,profileEnd,time,timeEnd,trace,warn'.split(',');\n    _results = [];\n    while (method = methods.pop()) {\n      _results.push(console[method] = console[method] || dummy);\n    }\n    return _results;\n  })();\n})();\n","var View,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = View = (function(_super) {\n\n  __extends(View, _super);\n\n  function View() {\n    return View.__super__.constructor.apply(this, arguments);\n  }\n\n  View.prototype.tagName = 'section';\n\n  View.prototype.template = function() {};\n\n  View.prototype.initialize = function() {\n    return this.render();\n  };\n\n  View.prototype.getRenderData = function() {\n    var _ref;\n    return {\n      model: (_ref = this.model) != null ? _ref.toJSON() : void 0\n    };\n  };\n\n  View.prototype.render = function() {\n    this.beforeRender();\n    this.$el.html(this.template());\n    this.afterRender();\n    return this;\n  };\n\n  View.prototype.beforeRender = function() {};\n\n  View.prototype.afterRender = function() {};\n\n  View.prototype.destroy = function() {\n    this.undelegateEvents();\n    this.$el.removeData().unbind();\n    this.remove();\n    return Backbone.View.prototype.remove.call(this);\n  };\n\n  return View;\n\n})(Backbone.View);\n","var View, ViewCollection, methods,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nView = require('./view');\n\nViewCollection = (function(_super) {\n\n  __extends(ViewCollection, _super);\n\n  function ViewCollection() {\n    this.renderAll = __bind(this.renderAll, this);\n\n    this.renderOne = __bind(this.renderOne, this);\n    return ViewCollection.__super__.constructor.apply(this, arguments);\n  }\n\n  ViewCollection.prototype.collection = new Backbone.Collection();\n\n  ViewCollection.prototype.view = new View();\n\n  ViewCollection.prototype.views = [];\n\n  ViewCollection.prototype.length = function() {\n    return this.views.length;\n  };\n\n  ViewCollection.prototype.add = function(views, options) {\n    var view, _i, _len;\n    if (options == null) {\n      options = {};\n    }\n    views = _.isArray(views) ? views.slice() : [views];\n    for (_i = 0, _len = views.length; _i < _len; _i++) {\n      view = views[_i];\n      if (!this.get(view.cid)) {\n        this.views.push(view);\n        if (!options.silent) {\n          this.trigger('add', view, this);\n        }\n      }\n    }\n    return this;\n  };\n\n  ViewCollection.prototype.get = function(cid) {\n    return this.find(function(view) {\n      return view.cid === cid;\n    }) || null;\n  };\n\n  ViewCollection.prototype.remove = function(views, options) {\n    var view, _i, _len;\n    if (options == null) {\n      options = {};\n    }\n    views = _.isArray(views) ? views.slice() : [views];\n    for (_i = 0, _len = views.length; _i < _len; _i++) {\n      view = views[_i];\n      this.destroy(view);\n      if (!options.silent) {\n        this.trigger('remove', view, this);\n      }\n    }\n    return this;\n  };\n\n  ViewCollection.prototype.destroy = function(view, options) {\n    var _views;\n    if (view == null) {\n      view = this;\n    }\n    if (options == null) {\n      options = {};\n    }\n    _views = this.filter(_view)(function() {\n      return view.cid !== _view.cid;\n    });\n    this.views = _views;\n    view.undelegateEvents();\n    view.$el.removeData().unbind();\n    view.remove();\n    Backbone.View.prototype.remove.call(view);\n    if (!options.silent) {\n      this.trigger('remove', view, this);\n    }\n    return this;\n  };\n\n  ViewCollection.prototype.reset = function(views, options) {\n    var view, _i, _j, _len, _len1, _ref;\n    if (options == null) {\n      options = {};\n    }\n    views = _.isArray(views) ? views.slice() : [views];\n    _ref = this.views;\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      view = _ref[_i];\n      this.destroy(view, options);\n    }\n    if (views.length !== 0) {\n      for (_j = 0, _len1 = views.length; _j < _len1; _j++) {\n        view = views[_j];\n        this.add(view, options);\n      }\n      if (!options.silent) {\n        this.trigger('reset', view, this);\n      }\n    }\n    return this;\n  };\n\n  ViewCollection.prototype.renderOne = function(model) {\n    var view;\n    view = new this.view(model);\n    this.$el.prepend(view.render().el);\n    this.add(view);\n    return this;\n  };\n\n  ViewCollection.prototype.renderAll = function() {\n    this.collection.each(this.renderOne);\n    return this;\n  };\n\n  return ViewCollection;\n\n})(View);\n\nmethods = ['forEach', 'each', 'map', 'reduce', 'reduceRight', 'find', 'detect', 'filter', 'select', 'reject', 'every', 'all', 'some', 'any', 'include', 'contains', 'invoke', 'max', 'min', 'sortBy', 'sortedIndex', 'toArray', 'size', 'first', 'initial', 'rest', 'last', 'without', 'indexOf', 'shuffle', 'lastIndexOf', 'isEmpty', 'groupBy'];\n\n_.each(methods, function(method) {\n  return ViewCollection.prototype[method] = function() {\n    return _[method].apply(_, [this.views].concat(_.toArray(arguments)));\n  };\n});\n\nmodule.exports = ViewCollection;\n","var Bookmark,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = Bookmark = (function(_super) {\n\n  __extends(Bookmark, _super);\n\n  function Bookmark() {\n    return Bookmark.__super__.constructor.apply(this, arguments);\n  }\n\n  Bookmark.prototype.urlRoot = 'bookmarks';\n\n  Bookmark.prototype.isNew = function() {\n    return !(this.id != null);\n  };\n\n  Bookmark.prototype.cleanValues = function() {\n    var httpUrl, readableTags, tag, tags, _i, _len;\n    readableTags = \"\";\n    tags = this.attributes.tags;\n    if (typeof tags === \"string\") {\n      tags = tags.split(\",\");\n    }\n    for (_i = 0, _len = tags.length; _i < _len; _i++) {\n      tag = tags[_i];\n      readableTags += tag + \", \";\n    }\n    readableTags = readableTags.slice(0, readableTags.length - 2);\n    this.attributes.readableTags = readableTags;\n    httpUrl = this.attributes.url;\n    if (httpUrl.slice(0, 4) !== \"http\") {\n      httpUrl = \"http://\" + httpUrl;\n    }\n    return this.attributes.httpUrl = httpUrl;\n  };\n\n  return Bookmark;\n\n})(Backbone.Model);\n","var AppRouter,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = AppRouter = (function(_super) {\n\n  __extends(AppRouter, _super);\n\n  function AppRouter() {\n    return AppRouter.__super__.constructor.apply(this, arguments);\n  }\n\n  AppRouter.prototype.routes = {\n    '': function() {}\n  };\n\n  return AppRouter;\n\n})(Backbone.Router);\n","var AppRouter, AppView, Bookmark, BookmarksView, View,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nView = require(\"../lib/view\");\n\nAppRouter = require(\"../routers/app_router\");\n\nBookmarksView = require(\"./bookmarks_view\");\n\nBookmark = require(\"../models/bookmark\");\n\nmodule.exports = AppView = (function(_super) {\n\n  __extends(AppView, _super);\n\n  function AppView() {\n    return AppView.__super__.constructor.apply(this, arguments);\n  }\n\n  AppView.prototype.el = \"body.application\";\n\n  AppView.prototype.events = {\n    \"click form .create\": \"bookmarkLink\",\n    \"keyup form .url-field\": \"showForm\",\n    \"click form .url-field\": \"showForm\",\n    \"click form .title\": \"toggleForm\",\n    \"click form .clean\": \"cleanForm\",\n    \"click .import\": \"import\",\n    \"click .export\": \"export\",\n    \"change #bookmarks-file\": \"uploadFile\"\n  };\n\n  AppView.prototype.template = function() {\n    return require(\"./templates/home\");\n  };\n\n  AppView.prototype.initialize = function() {\n    return this.router = CozyApp.Routers.AppRouter = new AppRouter();\n  };\n\n  AppView.prototype.afterRender = function() {\n    var _this = this;\n    $(\".url-field\").focus();\n    this.bookmarksView = new BookmarksView();\n    this.bookmarksView.$el.html('<em>loading...</em>');\n    return this.bookmarksView.collection.fetch({\n      success: function() {\n        _this.bookmarksView.$el.find('em').remove();\n        window.sortOptions = {\n          \"valueNames\": [\"title\", \"url\", \"tags\", \"description\"]\n        };\n        window.featureList = new List(\"bookmarks-list\", window.sortOptions);\n        return alertify.log(\"bookmarks loaded\");\n      }\n    });\n  };\n\n  AppView.prototype.showForm = function(evt) {\n    var $container, title;\n    $container = $(\"form .full-form\");\n    title = $(evt.target).parents(\".title\");\n    if (!$container.is(\":visible\")) {\n      title.click();\n    }\n    return false;\n  };\n\n  AppView.prototype.toggleForm = function(evt) {\n    var $container, $title;\n    $container = $(\"form .full-form\");\n    $title = $(evt.currentTarget);\n    $container.toggle(\"slow\", function() {\n      if ($container.is(\":visible\")) {\n        return $title.attr(\"title\", \"click to hide the detailed form\");\n      } else {\n        return $title.attr(\"title\", \"click to show the full form\");\n      }\n    });\n    return false;\n  };\n\n  AppView.prototype.cleanForm = function(evt) {\n    var $form, $inputs;\n    $form = $(\"form\");\n    $inputs = $form.find(\"input, textarea\");\n    $inputs.val(\"\");\n    return false;\n  };\n\n  AppView.prototype.bookmarkLink = function(evt) {\n    var bookObj, bookmark, description, tags, title, url,\n      _this = this;\n    url = $('.url-field').val();\n    title = $('.title-field').val();\n    tags = $('.tags-field').val().split(',').map(function(tag) {\n      return $.trim(tag);\n    });\n    description = $('.description-field').val();\n    if ((url != null ? url.length : void 0) > 0) {\n      bookObj = {\n        title: title,\n        url: url,\n        tags: tags,\n        description: description\n      };\n      bookmark = new Bookmark(bookObj);\n      this.bookmarksView.collection.create(bookmark, {\n        success: function() {\n          _this.cleanForm();\n          return alertify.log(\"\" + (title || url) + \" added\");\n        },\n        error: function() {\n          return alertify.alert(\"Server error occured, \" + \"bookmark was not saved\");\n        }\n      });\n    } else {\n      alertify.alert(\"Url field is required\");\n    }\n    return false;\n  };\n\n  AppView.prototype.addBookmarkFromFile = function(link) {\n    var $link, bookObj, bookmark, description, next, title, url,\n      _this = this;\n    $link = $(link);\n    if (!!$link.attr(\"href\").indexOf(\"place\") && !$link.attr(\"feedurl\")) {\n      url = $link.attr(\"href\");\n      title = $link.text();\n      description = \"\";\n      next = $link.parents(\":first\").next();\n      if (next.is(\"dd\")) {\n        description = next.text();\n      }\n      bookObj = {\n        title: title,\n        url: url,\n        tags: [],\n        description: description\n      };\n      bookmark = new Bookmark(bookObj);\n      return this.bookmarksView.collection.create(bookmark, {\n        success: function() {\n          var imported;\n          imported = $(\".imported\");\n          if (imported.text()) {\n            return imported.text(parseInt(imported.text()) + 1);\n          } else {\n            return imported.text(1);\n          }\n        },\n        error: function() {\n          var notImported;\n          notImported = $(\".import-failed\");\n          if (notImported.text()) {\n            return notImported.text(parseInt(notImported.text()) + 1);\n          } else {\n            return notImported.text(1);\n          }\n        }\n      });\n    }\n  };\n\n  AppView.prototype.addBookmarksFromFile = function(file) {\n    var link, links, loaded, _i, _len, _results;\n    loaded = $(file);\n    links = loaded.find(\"dt a\");\n    _results = [];\n    for (_i = 0, _len = links.length; _i < _len; _i++) {\n      link = links[_i];\n      _results.push(this.addBookmarkFromFile(link));\n    }\n    return _results;\n  };\n\n  AppView.prototype.uploadFile = function(evt) {\n    var file, reader,\n      _this = this;\n    file = evt.target.files[0];\n    if (file.type !== \"text/html\") {\n      alertify.alert(\"This file cannot be imported\");\n      return;\n    }\n    reader = new FileReader();\n    reader.onload = function(evt) {\n      return _this.addBookmarksFromFile(evt.target.result);\n    };\n    return reader.readAsText(file);\n  };\n\n  AppView.prototype[\"import\"] = function(evt) {\n    return alertify.confirm(\"Import html bookmarks file exported by \" + \"firefox or chrome\", function(ok) {\n      if (ok) {\n        return $(\"#bookmarks-file\").click();\n      }\n    });\n  };\n\n  AppView.prototype[\"export\"] = function(evt) {\n    return window.location = \"export\";\n  };\n\n  return AppView;\n\n})(View);\n","var BookmarkView, View,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nView = require(\"../lib/view\");\n\nmodule.exports = BookmarkView = (function(_super) {\n\n  __extends(BookmarkView, _super);\n\n  BookmarkView.prototype.className = \"bookmark\";\n\n  BookmarkView.prototype.tagName = \"li\";\n\n  BookmarkView.prototype.events = {\n    \"click .delete\": \"deleteBookmark\"\n  };\n\n  function BookmarkView(model) {\n    this.model = model;\n    BookmarkView.__super__.constructor.call(this);\n  }\n\n  BookmarkView.prototype.template = function() {\n    var template;\n    template = require(\"./templates/bookmark\");\n    return template(this.getRenderData());\n  };\n\n  BookmarkView.prototype.render = function() {\n    this.model.cleanValues();\n    return BookmarkView.__super__.render.call(this);\n  };\n\n  BookmarkView.prototype.deleteBookmark = function() {\n    var title,\n      _this = this;\n    title = this.$el.find(\".title\").html();\n    $(\".url-field\").val(this.$el.find(\".title a\").attr(\"href\"));\n    $(\".title-field\").val(this.$el.find(\".title a\").text());\n    $(\".tags-field\").val(this.$el.find(\".tags\").text());\n    $(\".description-field\").val(this.$el.find(\".description p\").text());\n    $(\".full-form\").show();\n    return this.model.destroy({\n      success: function() {\n        _this.destroy();\n        window.featureList.remove(\"title\", title);\n        return alertify.log(\"\" + title + \" removed and placed in form\");\n      },\n      error: function() {\n        alertify.alert(\"Server error occured, bookmark was not deleted.\");\n        return _this.$('.delete-button').html(\"delete\");\n      }\n    });\n  };\n\n  return BookmarkView;\n\n})(View);\n","var BookmarkCollection, BookmarkView, BookmarksView, ViewCollection,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nViewCollection = require('../lib/view_collection');\n\nBookmarkView = require('./bookmark_view');\n\nBookmarkCollection = require('../collections/bookmark_collection');\n\nmodule.exports = BookmarksView = (function(_super) {\n\n  __extends(BookmarksView, _super);\n\n  function BookmarksView() {\n    this.renderOne = __bind(this.renderOne, this);\n    return BookmarksView.__super__.constructor.apply(this, arguments);\n  }\n\n  BookmarksView.prototype.el = '#bookmarks-list .list';\n\n  BookmarksView.prototype.view = BookmarkView;\n\n  BookmarksView.prototype.renderOne = function(model) {\n    var sortObj, view;\n    view = new this.view(model);\n    this.$el.prepend(view.render().el);\n    this.add(view);\n    if (window.featureList) {\n      sortObj = {\n        \"el\": view.el,\n        \"values\": window.sortOptions.valueNames\n      };\n      window.featureList.add(sortObj);\n    }\n    return this;\n  };\n\n  BookmarksView.prototype.initialize = function() {\n    return this.collection = new BookmarkCollection(this);\n  };\n\n  return BookmarksView;\n\n})(ViewCollection);\n","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"buttons\"><button title=\"Remove this link from saved bookmarks and place its details into the form\" class=\"glyphicon glyphicon-share delete\"></button></div><div class=\"all\">');\nif ( model.title)\n{\nbuf.push('<div class=\"title\"><a');\nbuf.push(attrs({ 'href':(\"\" + (model.httpUrl) + \"\") }, {\"href\":true}));\nbuf.push('>' + escape((interp = model.title) == null ? '' : interp) + '</a></div><div class=\"url\"><a');\nbuf.push(attrs({ 'href':(\"\" + (model.httpUrl) + \"\") }, {\"href\":true}));\nbuf.push('>' + escape((interp = model.url) == null ? '' : interp) + '</a></div>');\n}\nelse\n{\nbuf.push('<div class=\"title full\"><a');\nbuf.push(attrs({ 'href':(\"\" + (model.httpUrl) + \"\") }, {\"href\":true}));\nbuf.push('>' + escape((interp = model.url) == null ? '' : interp) + '</a></div>');\n}\nbuf.push('</div>');\nif ( model.description || model.tags.length)\n{\nbuf.push('<div class=\"description\"> ');\nif ( model.tags.length)\n{\nbuf.push('<div class=\"tags\">tags: ' + escape((interp = model.readableTags) == null ? '' : interp) + '</div>');\n}\nbuf.push('<p>' + escape((interp = model.description) == null ? '' : interp) + '</p></div>');\n}\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div id=\"content\"><input type=\"file\" name=\"bookmarks-file\" id=\"bookmarks-file\"/><span class=\"import\"><button title=\"import html bookmarks files exported from your browser\" class=\"glyphicon glyphicon-upload import\"><p class=\"imported\"></p><p class=\"importe-failed\"></p></button></span><span class=\"export\"><button title=\"export bookmarks in html\" class=\"glyphicon glyphicon-download export\"></button></span><form id=\"create-bookmark-form\" role=\"form\"><div class=\"panel panel-default\"><div class=\"panel-heading title\"><h3 title=\"Show the full form\" class=\"panel-title\"> \\nBookmark a link</h3><div class=\"row\"><div class=\"form-group col-xs-8\"><input placeholder=\"url\" class=\"form-control url-field\"/></div></div></div><div class=\"panel-body full-form\"><div class=\"row\"><div class=\"form-group col-xs-5\"><input placeholder=\"title\" class=\"form-control title-field\"/></div><div class=\"form-group col-xs-5\"><input placeholder=\"tags, separated by \\',\\'\" class=\"form-control tags-field\"/></div></div><div class=\"row\"><div class=\"form-group col-xs-10\"><textarea placeholder=\"description\" class=\"form-control description-field\"></textarea></div><div class=\"buttons col-xs-2\"><button title=\"Save the bookmark\" class=\"glyphicon glyphicon-ok-circle create\"></button><button title=\"Clean the form\" class=\"glyphicon glyphicon-remove-circle clean\"></button></div></div></div></div></form><div id=\"bookmarks-list\"><div class=\"panel panel-default\"><div class=\"panel-heading\"><h3 class=\"panel-title\">mY BOOkmarks</h3><div class=\"row\"><div class=\"tools col-xs-12\"><div class=\"form-group\"><input placeholder=\"search\" class=\"form-control search\"/></div><button title=\"Sort links\" data-sort=\"title\" class=\"glyphicon glyphicon-sort sort descending\"></button></div></div></div><div class=\"panel-body\"><ul class=\"list\"></ul></div></div></div></div>');\n}\nreturn buf.join(\"\");\n};"]}